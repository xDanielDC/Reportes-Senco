import{_ as U}from"./AppLayout-deca06e6.js";import{_ as q}from"./PrimaryButton-9f83ec13.js";import{_ as v}from"./InputLabel-7ab20a25.js";import{a as W}from"./DialogModal-cfec345b.js";import{_ as L}from"./SecondaryButton-641ff84c.js";import{_ as $}from"./TextInput-c4d1940e.js";import{r as F,a as y,u as G}from"./i18n-validators-bc3fab5c.js";import{p as B,a3 as O,L as z,O as H,o as r,c as p,w as n,a as u,H as A,b as l,u as i,i as k,f as _,k as K,t as x,n as h,e as d,F as b,g as w,h as C}from"./app-8631d0ed.js";import{_ as R}from"./CustomButton-4ddc4f19.js";const Z={class:"py-10"},j={class:"max-w-8xl sm:px-4 lg:px-6"},J={class:"text-center flex flex-row"},P={class:"mt-4"},Q={key:0,class:"mt-1"},X={class:"mt-4"},Y={key:0,class:"mt-1"},ee={class:"mt-4"},te={key:0,class:"mt-1"},oe={class:"mt-4"},re={key:0,class:"mt-1"},fe={__name:"Index",props:{reports:{type:Array,default:[]}},setup(S){const c=B({data:S.reports,columns:["actions","name","updated_at"],options:{headings:{actions:"",name:"NOMBRE",updated_at:"ACTUALIZADO EL"},clientSorting:!1,uniqueKey:"id",sortable:["name"]}}),e=B({open:!1,editMode:!1,title:"",form:{id:"",name:"",group_id:"",report_id:"",dataset_id:""}}),T=B({form:{id:{requiredIf:F(e.editMode)},name:{required:y},group_id:{required:y},report_id:{required:y},dataset_id:{required:y}}}),a=G(T,O(e)),E=()=>{e.open=!0,e.title="Crear Reporte"},M=s=>{e.open=!0,e.editMode=!0,e.title="Editar Reporte",e.form={id:s.id,name:s.name,group_id:s.group_id,report_id:s.report_id,dataset_id:s.dataset_id}},g=()=>{e.open=!1,e.editMode=!1,e.title="",e.form={id:"",name:"",group_id:"",report_id:"",dataset_id:""},a.value.form.$reset()},N=()=>{a.value.form.$touch(),a.value.form.$invalid?Swal.fire({icon:"error",title:"¡Whoops!",text:"Verifica que toda la información este correctamente diligenciada",confirmButtonText:"Aceptar"}):axios.post(route("report.store"),e.form).then(s=>{g(),c.data=s.data}).catch(s=>{Swal.fire({icon:"error",title:"¡Whoops!",text:s.response.data,confirmButtonText:"Aceptar"})})},D=()=>{a.value.form.$touch(),a.value.form.$invalid?Swal.fire({icon:"error",title:"¡Whoops!",text:"Verifica que toda la información este correctamente diligenciada",confirmButtonText:"Aceptar"}):axios.put(route("report.update",e.form.id),e.form).then(s=>{g(),c.data=s.data}).catch(s=>{Swal.fire({icon:"error",title:"¡Whoops!",text:s.response.data,confirmButtonText:"Aceptar"})})},I=s=>{Swal.fire({icon:"question",title:"¿Eliminar Reporte?",text:"¡Esta acción no es reversible!",showCancelButton:!0,confirmButtonText:"¡Si, Eliminar!"}).then(t=>{t.isConfirmed&&axios.delete(route("report.destroy",s)).then(f=>{c.data=f.data}).catch(f=>{Swal.fire({icon:"error",title:"¡Whoops!",text:f.response.data,confirmButtonText:"Aceptar"})})})};return(s,t)=>{const f=z("v-client-table"),V=H("permission");return r(),p(U,{title:"Reportes"},{header:n(()=>[...t[4]||(t[4]=[u("div",{class:"flex flex-row"},[u("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Reportes ")],-1)])]),actions:n(()=>[A((r(),p(q,{class:"ml-auto",type:"button",onClick:E},{default:n(()=>[l(i(k),{class:"mr-2",icon:"plus"}),t[5]||(t[5]=_(" Crear ",-1))]),_:1})),[[V,"report.create"]])]),default:n(()=>[u("div",Z,[u("div",j,[l(f,{columns:c.columns,data:c.data,options:c.options,class:"overflow-y-auto"},{actions:n(({row:o})=>[u("div",J,[l(i(K),{href:s.route("report.view",[o.group_id,o.report_id]),class:"mr-2 inline-flex items-center px-2 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},{default:n(()=>[l(i(k),{icon:["fas","arrow-up-right-from-square"]})]),_:1},8,["href"]),A((r(),p(R,{class:"mr-2",onClick:m=>M(o)},{default:n(()=>[l(i(k),{icon:["far","pen-to-square"]})]),_:1},8,["onClick"])),[[V,"report.edit"]]),A((r(),p(R,{onClick:m=>I(o.id)},{default:n(()=>[l(i(k),{icon:["far","trash-can"]})]),_:1},8,["onClick"])),[[V,"report.destroy"]])])]),_:1},8,["columns","data","options"])])]),l(W,{show:e.open,onClose:g},{title:n(()=>[_(x(e.title),1)]),content:n(()=>[u("div",P,[l(v,{value:"Nombre"}),l($,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.name=o),class:h([{"border-red-500":i(a).form.name.$error},"mt-1 block w-full"]),autocomplete:"Nombre",required:"",type:"text"},null,8,["modelValue","class"]),i(a).form.name.$error?(r(),d("ul",Q,[(r(!0),d(b,null,w(i(a).form.name.$errors,(o,m)=>(r(),d("li",{key:m,class:"text-red-500"},x(o.$message),1))),128))])):C("",!0)]),u("div",X,[l(v,{value:"Grupo"}),l($,{modelValue:e.form.group_id,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.group_id=o),class:h([{"border-red-500":i(a).form.group_id.$error},"mt-1 block w-full"]),autocomplete:"Grupo",required:"",type:"text"},null,8,["modelValue","class"]),i(a).form.group_id.$error?(r(),d("ul",Y,[(r(!0),d(b,null,w(i(a).form.group_id.$errors,(o,m)=>(r(),d("li",{key:m,class:"text-red-500"},x(o.$message),1))),128))])):C("",!0)]),u("div",ee,[l(v,{value:"Reporte"}),l($,{modelValue:e.form.report_id,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.report_id=o),class:h([{"border-red-500":i(a).form.report_id.$error},"mt-1 block w-full"]),autocomplete:"Reporte",required:"",type:"text"},null,8,["modelValue","class"]),i(a).form.report_id.$error?(r(),d("ul",te,[(r(!0),d(b,null,w(i(a).form.report_id.$errors,(o,m)=>(r(),d("li",{key:m,class:"text-red-500"},x(o.$message),1))),128))])):C("",!0)]),u("div",oe,[l(v,{value:"Dataset"}),l($,{modelValue:e.form.dataset_id,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.dataset_id=o),class:h([{"border-red-500":i(a).form.dataset_id.$error},"mt-1 block w-full"]),autocomplete:"Dataset",required:"",type:"text"},null,8,["modelValue","class"]),i(a).form.dataset_id.$error?(r(),d("ul",re,[(r(!0),d(b,null,w(i(a).form.dataset_id.$errors,(o,m)=>(r(),d("li",{key:m,class:"text-red-500"},x(o.$message),1))),128))])):C("",!0)])]),footer:n(()=>[l(L,{onClick:g},{default:n(()=>[...t[6]||(t[6]=[_(" Cancelar ",-1)])]),_:1}),e.editMode?(r(),p(q,{key:0,class:"ml-3",onClick:D},{default:n(()=>[...t[7]||(t[7]=[_(" Actualizar ",-1)])]),_:1})):(r(),p(q,{key:1,class:"ml-3",onClick:N},{default:n(()=>[...t[8]||(t[8]=[_(" Guardar ",-1)])]),_:1}))]),_:1},8,["show"])]),_:1})}}};export{fe as default};
