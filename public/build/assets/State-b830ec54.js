import{u as V,r as L,a as q}from"./i18n-validators-bc3fab5c.js";import{_ as I}from"./AppLayout-deca06e6.js";import{_ as N}from"./PrimaryButton-9f83ec13.js";import{_ as A,k as R,L as l,O as S,o as r,c,w as a,a as t,H as v,b as n,f as p,e as u,g as b,t as d,F as w,h as C,n as T}from"./app-8631d0ed.js";import{_ as z}from"./DangerButton-03fa1d82.js";import{_ as O}from"./SecondaryButton-641ff84c.js";import{_ as P}from"./InputLabel-7ab20a25.js";import{a as F}from"./DialogModal-cfec345b.js";import{_ as G}from"./TextInput-c4d1940e.js";const H={components:{TextInput:G,DialogModal:F,InputLabel:P,SecondaryButton:O,DangerButton:z,Link:R,PrimaryButton:N,AppLayout:I},props:{states:Array},setup(){return{v$:V()}},validations(){return{modal:{form:{id:{requiredIf:L(this.modal.editMode)},name:{required:q}}}}},data(){return{table:{data:this.states},modal:{open:!1,editMode:!1,form:{id:"",name:""}}}},methods:{closeModal(){this.modal={open:!1,editMode:!1,form:{id:"",name:""}}},edit(o){this.modal={open:!0,editMode:!0,form:{id:o.id,name:o.name}}},store(){this.v$.modal.form.$touch(),this.v$.modal.form.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.post(route("state.store"),this.modal.form).then(o=>{this.closeModal(),this.table.data=o.data}).catch(o=>{this.$swal({icon:"error",title:"Error",text:o.response.data})})},update(){this.v$.modal.form.$touch(),this.v$.modal.form.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.put(route("state.update",this.modal.form.id),this.modal.form).then(o=>{this.closeModal(),this.table.data=o.data}).catch(o=>{this.$swal({icon:"error",title:"Error",text:o.response.data})})},destroy(o){this.$swal({icon:"question",title:"¿Eliminar registro?",text:"¡Esta acción no es reversible!",showCancelButton:!0,confirmButtonText:"¡Si, Eliminar!"}).then(e=>{e.isConfirmed&&axios.delete(route("state.destroy",o)).then(f=>{this.table.data=f.data}).catch(f=>{this.$swal({icon:"error",title:"Error",text:f.response.data})})})}}},U={class:"py-12"},j={class:"max-w-8xl mx-6 sm:px-6 lg:px-8"},J={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},K={class:"py-2 align-middle inline-block min-w-full"},Q={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},W={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Y={class:"px-6 py-4 text-left text-sm font-medium"},Z={class:"px-6 py-4 text-left text-sm font-medium"},tt={class:"px-6 py-4 text-left text-sm font-medium"},et={class:"px-6 py-4 text-left text-sm font-medium"},ot={class:"px-6 py-4 text-left text-sm font-medium"},st={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium"},at={class:"mt-4"},rt={key:0,class:"mt-1"};function it(o,e,f,x,i,m){const _=l("font-awesome-icon"),h=l("PrimaryButton"),k=l("SecondaryButton"),$=l("DangerButton"),B=l("InputLabel"),M=l("TextInput"),E=l("DialogModal"),D=l("AppLayout"),y=S("permission");return r(),c(D,{title:"Diseño - Estados"},{header:a(()=>[...e[2]||(e[2]=[t("div",{class:"flex flex-row"},[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Diseño - Estados ")],-1)])]),actions:a(()=>[v((r(),c(h,{type:"button",class:"ml-auto",onClick:e[0]||(e[0]=s=>i.modal.open=!0)},{default:a(()=>[n(_,{icon:"plus",class:"mr-2"}),e[3]||(e[3]=p(" Nuevo ",-1))]),_:1})),[[y,"design.state.create"]])]),default:a(()=>[t("div",U,[t("div",j,[t("div",J,[t("div",K,[t("div",Q,[t("table",W,[e[4]||(e[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Creado el "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Creado por "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actualizado el "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actualizado por "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"})])],-1)),t("tbody",X,[i.table.data.length>0?(r(!0),u(w,{key:0},b(i.table.data,s=>(r(),u("tr",null,[t("td",Y,d(s.name),1),t("td",Z,d(s.created_at),1),t("td",tt,d(s.created_by.name),1),t("td",et,d(s.updated_at),1),t("td",ot,d(s.updated_by.name),1),t("td",st,[v((r(),c(k,{class:"mr-2",onClick:g=>m.edit(s)},{default:a(()=>[n(_,{icon:["far","pen-to-square"]})]),_:1},8,["onClick"])),[[y,"report.edit"]]),v((r(),c($,{onClick:g=>m.destroy(s.id)},{default:a(()=>[n(_,{icon:["far","trash-can"]})]),_:1},8,["onClick"])),[[y,"report.destroy"]])])]))),256)):C("",!0)])])])])])])]),n(E,{show:i.modal.open,onClose:m.closeModal},{title:a(()=>[p(d(i.modal.editMode?"Editar":"Crear"),1)]),content:a(()=>[t("div",at,[n(B,{value:"Nombre"}),n(M,{modelValue:i.modal.form.name,"onUpdate:modelValue":e[1]||(e[1]=s=>i.modal.form.name=s),type:"text",class:T(["mt-1 block w-full",{"border-red-500":x.v$.modal.form.name.$error}]),required:"",autocomplete:"Nombre"},null,8,["modelValue","class"]),x.v$.modal.form.name.$error?(r(),u("ul",rt,[(r(!0),u(w,null,b(x.v$.modal.form.name.$errors,(s,g)=>(r(),u("li",{class:"text-red-500",key:g},d(s.$message),1))),128))])):C("",!0)])]),footer:a(()=>[n(k,{onClick:m.closeModal},{default:a(()=>[...e[5]||(e[5]=[p(" Cancelar ",-1)])]),_:1},8,["onClick"]),i.modal.editMode?(r(),c(h,{key:0,class:"ml-3",onClick:m.update},{default:a(()=>[...e[6]||(e[6]=[p(" Actualizar ",-1)])]),_:1},8,["onClick"])):(r(),c(h,{key:1,class:"ml-3",onClick:m.store},{default:a(()=>[...e[7]||(e[7]=[p(" Guardar ",-1)])]),_:1},8,["onClick"]))]),_:1},8,["show","onClose"])]),_:1})}const _t=A(H,[["render",it]]);export{_t as default};
