import{_ as U}from"./AppLayout-ae53a7bb.js";import{_ as q}from"./PrimaryButton-ae7b5b9e.js";import{_ as h}from"./InputLabel-b3778487.js";import{a as W}from"./DialogModal-0a95c594.js";import{_ as L}from"./SecondaryButton-f0719638.js";import{_ as v}from"./TextInput-ed7a8386.js";import{r as F,a as $,u as G}from"./i18n-validators-307ee24b.js";import{p as B,a2 as z,I as O,L as K,o,c as p,w as l,D as A,b as i,u as s,i as y,f as _,a as m,k as Z,t as x,n as k,e as n,F as b,g as w,h as C}from"./app-f1fb3b10.js";import{_ as R}from"./CustomButton-58efdc54.js";const j=m("div",{class:"flex flex-row"},[m("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Reportes ")],-1),H={class:"py-10"},J={class:"max-w-8xl sm:px-4 lg:px-6"},P={class:"text-center flex flex-row"},Q={class:"mt-4"},X={key:0,class:"mt-1"},Y={class:"mt-4"},ee={key:0,class:"mt-1"},te={class:"mt-4"},oe={key:0,class:"mt-1"},re={class:"mt-4"},ae={key:0,class:"mt-1"},_e={__name:"Index",props:{reports:{type:Array,default:[]}},setup(S){const u=B({data:S.reports,columns:["actions","name","updated_at"],options:{headings:{actions:"",name:"NOMBRE",updated_at:"ACTUALIZADO EL"},clientSorting:!1,uniqueKey:"id",sortable:["name"]}}),e=B({open:!1,editMode:!1,title:"",form:{id:"",name:"",group_id:"",report_id:"",dataset_id:""}}),T=B({form:{id:{requiredIf:F(e.editMode)},name:{required:$},group_id:{required:$},report_id:{required:$},dataset_id:{required:$}}}),r=G(T,z(e)),D=()=>{e.open=!0,e.title="Crear Reporte"},E=a=>{e.open=!0,e.editMode=!0,e.title="Editar Reporte",e.form={id:a.id,name:a.name,group_id:a.group_id,report_id:a.report_id,dataset_id:a.dataset_id}},g=()=>{e.open=!1,e.editMode=!1,e.title="",e.form={id:"",name:"",group_id:"",report_id:"",dataset_id:""},r.value.form.$reset()},M=()=>{r.value.form.$touch(),r.value.form.$invalid?Swal.fire({icon:"error",title:"¡Whoops!",text:"Verifica que toda la información este correctamente diligenciada",confirmButtonText:"Aceptar"}):axios.post(route("report.store"),e.form).then(a=>{g(),u.data=a.data}).catch(a=>{Swal.fire({icon:"error",title:"¡Whoops!",text:a.response.data,confirmButtonText:"Aceptar"})})},N=()=>{r.value.form.$touch(),r.value.form.$invalid?Swal.fire({icon:"error",title:"¡Whoops!",text:"Verifica que toda la información este correctamente diligenciada",confirmButtonText:"Aceptar"}):axios.put(route("report.update",e.form.id),e.form).then(a=>{g(),u.data=a.data}).catch(a=>{Swal.fire({icon:"error",title:"¡Whoops!",text:a.response.data,confirmButtonText:"Aceptar"})})},I=a=>{Swal.fire({icon:"question",title:"¿Eliminar Reporte?",text:"¡Esta acción no es reversible!",showCancelButton:!0,confirmButtonText:"¡Si, Eliminar!"}).then(d=>{d.isConfirmed&&axios.delete(route("report.destroy",a)).then(f=>{u.data=f.data}).catch(f=>{Swal.fire({icon:"error",title:"¡Whoops!",text:f.response.data,confirmButtonText:"Aceptar"})})})};return(a,d)=>{const f=O("v-client-table"),V=K("permission");return o(),p(U,{title:"Reportes"},{header:l(()=>[j]),actions:l(()=>[A((o(),p(q,{class:"ml-auto",type:"button",onClick:D},{default:l(()=>[i(s(y),{class:"mr-2",icon:"plus"}),_(" Crear ")]),_:1})),[[V,"report.create"]])]),default:l(()=>[m("div",H,[m("div",J,[i(f,{columns:u.columns,data:u.data,options:u.options,class:"overflow-y-auto"},{actions:l(({row:t})=>[m("div",P,[i(s(Z),{href:a.route("report.view",[t.group_id,t.report_id]),class:"mr-2 inline-flex items-center px-2 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},{default:l(()=>[i(s(y),{icon:["fas","arrow-up-right-from-square"]})]),_:2},1032,["href"]),A((o(),p(R,{class:"mr-2",onClick:c=>E(t)},{default:l(()=>[i(s(y),{icon:["far","pen-to-square"]})]),_:2},1032,["onClick"])),[[V,"report.edit"]]),A((o(),p(R,{onClick:c=>I(t.id)},{default:l(()=>[i(s(y),{icon:["far","trash-can"]})]),_:2},1032,["onClick"])),[[V,"report.destroy"]])])]),_:1},8,["columns","data","options"])])]),i(W,{show:e.open,onClose:g},{title:l(()=>[_(x(e.title),1)]),content:l(()=>[m("div",Q,[i(h,{value:"Nombre"}),i(v,{modelValue:e.form.name,"onUpdate:modelValue":d[0]||(d[0]=t=>e.form.name=t),class:k([{"border-red-500":s(r).form.name.$error},"mt-1 block w-full"]),autocomplete:"Nombre",required:"",type:"text"},null,8,["modelValue","class"]),s(r).form.name.$error?(o(),n("ul",X,[(o(!0),n(b,null,w(s(r).form.name.$errors,(t,c)=>(o(),n("li",{key:c,class:"text-red-500"},x(t.$message),1))),128))])):C("",!0)]),m("div",Y,[i(h,{value:"Grupo"}),i(v,{modelValue:e.form.group_id,"onUpdate:modelValue":d[1]||(d[1]=t=>e.form.group_id=t),class:k([{"border-red-500":s(r).form.group_id.$error},"mt-1 block w-full"]),autocomplete:"Grupo",required:"",type:"text"},null,8,["modelValue","class"]),s(r).form.group_id.$error?(o(),n("ul",ee,[(o(!0),n(b,null,w(s(r).form.group_id.$errors,(t,c)=>(o(),n("li",{key:c,class:"text-red-500"},x(t.$message),1))),128))])):C("",!0)]),m("div",te,[i(h,{value:"Reporte"}),i(v,{modelValue:e.form.report_id,"onUpdate:modelValue":d[2]||(d[2]=t=>e.form.report_id=t),class:k([{"border-red-500":s(r).form.report_id.$error},"mt-1 block w-full"]),autocomplete:"Reporte",required:"",type:"text"},null,8,["modelValue","class"]),s(r).form.report_id.$error?(o(),n("ul",oe,[(o(!0),n(b,null,w(s(r).form.report_id.$errors,(t,c)=>(o(),n("li",{key:c,class:"text-red-500"},x(t.$message),1))),128))])):C("",!0)]),m("div",re,[i(h,{value:"Dataset"}),i(v,{modelValue:e.form.dataset_id,"onUpdate:modelValue":d[3]||(d[3]=t=>e.form.dataset_id=t),class:k([{"border-red-500":s(r).form.dataset_id.$error},"mt-1 block w-full"]),autocomplete:"Dataset",required:"",type:"text"},null,8,["modelValue","class"]),s(r).form.dataset_id.$error?(o(),n("ul",ae,[(o(!0),n(b,null,w(s(r).form.dataset_id.$errors,(t,c)=>(o(),n("li",{key:c,class:"text-red-500"},x(t.$message),1))),128))])):C("",!0)])]),footer:l(()=>[i(L,{onClick:g},{default:l(()=>[_(" Cancelar ")]),_:1}),e.editMode?(o(),p(q,{key:0,class:"ml-3",onClick:N},{default:l(()=>[_(" Actualizar ")]),_:1})):(o(),p(q,{key:1,class:"ml-3",onClick:M},{default:l(()=>[_(" Guardar ")]),_:1}))]),_:1},8,["show"])]),_:1})}}};export{_e as default};
