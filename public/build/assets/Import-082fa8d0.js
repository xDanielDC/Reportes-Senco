import{_ as w}from"./PrimaryButton-9f83ec13.js";import{_ as b}from"./AppLayout-deca06e6.js";import{_ as k}from"./InputLabel-7ab20a25.js";import{_ as $}from"./TextInput-c4d1940e.js";import{u as C,a as u,m as I}from"./i18n-validators-bc3fab5c.js";import{_ as R}from"./Checkbox-41e6bf30.js";import{_ as B,L as a,o as d,c as L,w as n,a as t,b as i,n as V,f,e as _,g as E,t as l,F as A}from"./app-8631d0ed.js";const T={setup(){return{v$:C()}},props:{current_reports:Array},components:{Checkbox:R,PrimaryButton:w,AppLayout:b,InputLabel:k,TextInput:$},validations(){return{form:{group_id:{required:u},selected:{required:u,minLength:I(1)}}}},data(){return{form:{group_id:"",selected:[]},reports:[]}},methods:{getReports(){this.v$.form.group_id.$touch(),this.v$.form.group_id.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.get(route("report.import.get-reports"),{params:{group_id:this.form.group_id}}).then(o=>{this.reports=o.data}).catch(o=>{this.$swal({icon:"error",title:"Error",text:o.response.data})})},importReports(){this.v$.form.selected.$touch(),this.v$.form.selected.$invalid?this.$swal({icon:"error",title:"ERROR",text:"Verifica que toda la información este correctamente diligenciada"}):axios.post(route("report.import.store"),this.form).then(o=>{this.$swal({icon:"success",title:"Importación exitosa",text:"¡Los reportes seleccionados han importados correctamente!",showCancelButton:!1,confirmButtonText:"Aceptar"}),this.form={group_id:"",selected:[]},this.reports=[],this.v$.form.$reset()}).catch(o=>{this.$swal({icon:"error",title:"Error",text:o.response.data})})},checkExist(o){return this.current_reports.find(e=>e===o)!==void 0}}},N={class:"py-12"},q={class:"max-w-full mx-auto sm:px-6 lg:px-8"},D={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},P={class:"p-5"},F={class:"grid grid-cols-2 gap-5"},O={class:"border-t mt-5"},U={class:"overflow-hidden border-b border-gray-200 sm:rounded-lg mt-5"},z={class:"min-w-full divide-y divide-gray-200"},S={class:"bg-white divide-y divide-gray-200"},j={class:"px-6 py-4 text-center text-sm font-medium"},G={class:"px-6 py-4 text-left text-sm font-medium"},H={class:"px-6 py-4 text-left text-sm font-medium"},J={class:"px-6 py-4 text-left text-sm font-medium"},K={class:"border-t"},M={class:"p-4"};function Q(o,e,W,x,r,c){const h=a("TextInput"),p=a("font-awesome-icon"),m=a("PrimaryButton"),g=a("Checkbox"),v=a("AppLayout");return d(),L(v,{title:"Importación de reportes"},{header:n(()=>[...e[2]||(e[2]=[t("div",{class:"flex flex-row"},[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Importación de reportes ")],-1)])]),default:n(()=>[t("div",N,[t("div",q,[t("div",D,[t("div",P,[t("div",F,[t("div",null,[i(h,{modelValue:r.form.group_id,"onUpdate:modelValue":e[0]||(e[0]=s=>r.form.group_id=s),type:"text",class:V(["mt-1 block w-full",{"border-red-500":x.v$.form.group_id.$error}]),placeholder:"ID de grupo",autocomplete:"off"},null,8,["modelValue","class"])]),i(m,{onClick:c.getReports,class:"text-center"},{default:n(()=>[i(p,{icon:"search",class:"mr-2"}),e[3]||(e[3]=f(" Consultar reportes ",-1))]),_:1},8,["onClick"])]),t("div",O,[t("div",U,[t("table",z,[e[4]||(e[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nombre "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reporte "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dataset ")])],-1)),t("tbody",S,[(d(!0),_(A,null,E(r.reports,s=>(d(),_("tr",null,[t("td",j,[i(g,{checked:r.form.selected,"onUpdate:checked":e[1]||(e[1]=y=>r.form.selected=y),value:s,disabled:c.checkExist(s.id)},null,8,["checked","value","disabled"])]),t("td",G,l(s.name),1),t("td",H,l(s.id),1),t("td",J,l(s.datasetId),1)]))),256))])])])])]),t("div",K,[t("div",M,[i(m,{onClick:c.importReports,class:"text-center",disabled:r.form.selected.length===0},{default:n(()=>[i(p,{icon:"download",class:"mr-2"}),e[5]||(e[5]=f(" Importar reportes ",-1))]),_:1},8,["onClick","disabled"])])])])])])]),_:1})}const rt=B(T,[["render",Q]]);export{rt as default};
